{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNativeGestureHandler","_reactNativeReanimated","_portal","_nonSecure","Haptics","_calculations","_constants","_hooks","_styles","_interopRequireDefault","_styleGuide","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","HoldItemComponent","items","bottom","containerStyles","disableMove","menuAnchorPosition","activateOn","hapticFeedback","actionParams","closeOnTap","longPressMinDurationMs","children","state","menuProps","safeAreaInsets","useInternal","deviceOrientation","useDeviceOrientation","isActive","useSharedValue","isAnimationStarted","itemRectY","itemRectX","itemRectWidth","itemRectHeight","itemScale","transformValue","transformOrigin","key","useMemo","nanoid","menuHeight","itemsWithSeparator","filter","item","withSeparator","calculateMenuHeight","length","isHold","containerRef","useAnimatedRef","hapticResponse","style","selectionAsync","impactAsync","ImpactFeedbackStyle","notificationAsync","NotificationFeedbackType","activateAnimation","ctx","didMeasureLayout","measured","measure","value","pageY","pageX","height","width","position","getTransformOrigin","WINDOW_WIDTH","WINDOW_HEIGHT","calculateTransformValue","isAnchorPointTop","includes","tY","topTransform","styleGuide","spacing","bottomTransform","top","setMenuProps","itemHeight","itemWidth","itemY","itemX","anchorPosition","scaleBack","withTiming","duration","HOLD_ITEM_TRANSFORM_DURATION","onCompletion","isFinised","isListValid","CONTEXT_MENU_STATE","ACTIVE","runOnJS","scaleHold","HOLD_ITEM_SCALE_DOWN_VALUE","HOLD_ITEM_SCALE_DOWN_DURATION","scaleTap","withSequence","canCallActivateFunctions","willActivateWithTap","gestureEvent","useAnimatedGestureHandler","onActive","_","context","onFinish","overlayGestureEvent","END","animatedContainerStyle","useAnimatedStyle","animateOpacity","withDelay","opacity","transform","scale","containerStyle","React","animatedPortalStyle","transformAnimation","withSpring","SPRING_CONFIGURATION","zIndex","left","translateY","portalContainerStyle","styles","holdItem","animatedPortalProps","useAnimatedProps","pointerEvents","useAnimatedReaction","_state","GestureHandler","handlerChildren","createElement","TapGestureHandler","numberOfTaps","onHandlerStateChange","LongPressGestureHandler","minDurationMs","PortalOverlay","View","portalOverlay","Fragment","ref","Portal","name","animatedProps","HoldItem","memo","_default","exports"],"sources":["HoldItem.tsx"],"sourcesContent":["import React, { memo, useMemo } from 'react';\nimport { ViewProps } from 'react-native';\n\n//#region reanimated & gesture handler\nimport {\n  TapGestureHandler,\n  LongPressGestureHandler,\n  TapGestureHandlerGestureEvent,\n  LongPressGestureHandlerGestureEvent,\n} from 'react-native-gesture-handler';\nimport Animated, {\n  measure,\n  runOnJS,\n  useAnimatedGestureHandler,\n  useAnimatedProps,\n  useAnimatedRef,\n  useAnimatedStyle,\n  useSharedValue,\n  withDelay,\n  withTiming,\n  withSequence,\n  withSpring,\n  useAnimatedReaction,\n} from 'react-native-reanimated';\n//#endregion\n\n//#region dependencies\nimport { Portal } from '@gorhom/portal';\nimport { nanoid } from 'nanoid/non-secure';\nimport * as Haptics from 'expo-haptics';\n//#endregion\n\n//#region utils & types\nimport {\n  TransformOriginAnchorPosition,\n  getTransformOrigin,\n  calculateMenuHeight,\n} from '../../utils/calculations';\nimport {\n  HOLD_ITEM_TRANSFORM_DURATION,\n  HOLD_ITEM_SCALE_DOWN_DURATION,\n  HOLD_ITEM_SCALE_DOWN_VALUE,\n  SPRING_CONFIGURATION,\n  WINDOW_HEIGHT,\n  WINDOW_WIDTH,\n  CONTEXT_MENU_STATE,\n} from '../../constants';\nimport { useDeviceOrientation } from '../../hooks';\nimport styles from './styles';\n\nimport type { HoldItemProps, GestureHandlerProps } from './types';\nimport styleGuide from '../../styleGuide';\nimport { useInternal } from '../../hooks';\n//#endregion\n\ntype Context = { didMeasureLayout: boolean };\n\nconst HoldItemComponent = ({\n  items,\n  bottom,\n  containerStyles,\n  disableMove,\n  menuAnchorPosition,\n  activateOn,\n  hapticFeedback,\n  actionParams,\n  closeOnTap,\n  longPressMinDurationMs = 150,\n  children,\n}: HoldItemProps) => {\n  //#region hooks\n  const { state, menuProps, safeAreaInsets } = useInternal();\n  const deviceOrientation = useDeviceOrientation();\n  //#endregion\n\n  //#region variables\n  const isActive = useSharedValue(false);\n  const isAnimationStarted = useSharedValue(false);\n\n  const itemRectY = useSharedValue<number>(0);\n  const itemRectX = useSharedValue<number>(0);\n  const itemRectWidth = useSharedValue<number>(0);\n  const itemRectHeight = useSharedValue<number>(0);\n  const itemScale = useSharedValue<number>(1);\n  const transformValue = useSharedValue<number>(0);\n\n  const transformOrigin = useSharedValue<TransformOriginAnchorPosition>(\n    menuAnchorPosition || 'top-right'\n  );\n\n  const key = useMemo(() => `hold-item-${nanoid()}`, []);\n  const menuHeight = useMemo(() => {\n    const itemsWithSeparator = items.filter(item => item.withSeparator);\n    return calculateMenuHeight(items.length, itemsWithSeparator.length);\n  }, [items]);\n\n  const isHold = !activateOn || activateOn === 'hold';\n  //#endregion\n\n  //#region refs\n  const containerRef = useAnimatedRef<Animated.View>();\n  //#endregion\n\n  //#region functions\n  const hapticResponse = () => {\n    const style = !hapticFeedback ? 'Medium' : hapticFeedback;\n    switch (style) {\n      case `Selection`:\n        Haptics.selectionAsync();\n        break;\n      case `Light`:\n      case `Medium`:\n      case `Heavy`:\n        Haptics.impactAsync(Haptics.ImpactFeedbackStyle[style]);\n        break;\n      case `Success`:\n      case `Warning`:\n      case `Error`:\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType[style]);\n        break;\n      default:\n    }\n  };\n  //#endregion\n\n  //#region worklet functions\n  const activateAnimation = (ctx: any) => {\n    'worklet';\n    if (!ctx.didMeasureLayout) {\n      const measured = measure(containerRef);\n\n      itemRectY.value = measured.pageY;\n      itemRectX.value = measured.pageX;\n      itemRectHeight.value = measured.height;\n      itemRectWidth.value = measured.width;\n\n      if (!menuAnchorPosition) {\n        const position = getTransformOrigin(\n          measured.pageX,\n          itemRectWidth.value,\n          deviceOrientation === 'portrait' ? WINDOW_WIDTH : WINDOW_HEIGHT,\n          bottom\n        );\n        transformOrigin.value = position;\n      }\n    }\n  };\n\n  const calculateTransformValue = () => {\n    'worklet';\n\n    const height =\n      deviceOrientation === 'portrait' ? WINDOW_HEIGHT : WINDOW_WIDTH;\n\n    const isAnchorPointTop = transformOrigin.value.includes('top');\n\n    let tY = 0;\n    if (!disableMove) {\n      if (isAnchorPointTop) {\n        const topTransform =\n          itemRectY.value +\n          itemRectHeight.value +\n          menuHeight +\n          styleGuide.spacing +\n          (safeAreaInsets?.bottom || 0);\n\n        tY = topTransform > height ? height - topTransform : 0;\n      } else {\n        const bottomTransform =\n          itemRectY.value - menuHeight - (safeAreaInsets?.top || 0);\n        tY =\n          bottomTransform < 0 ? -bottomTransform + styleGuide.spacing * 2 : 0;\n      }\n    }\n    return tY;\n  };\n\n  const setMenuProps = () => {\n    'worklet';\n\n    menuProps.value = {\n      itemHeight: itemRectHeight.value,\n      itemWidth: itemRectWidth.value,\n      itemY: itemRectY.value,\n      itemX: itemRectX.value,\n      anchorPosition: transformOrigin.value,\n      menuHeight: menuHeight,\n      items,\n      transformValue: transformValue.value,\n      actionParams: actionParams || {},\n    };\n  };\n\n  const scaleBack = () => {\n    'worklet';\n    itemScale.value = withTiming(1, {\n      duration: HOLD_ITEM_TRANSFORM_DURATION / 2,\n    });\n  };\n\n  const onCompletion = (isFinised?: boolean) => {\n    'worklet';\n    const isListValid = items && items.length > 0;\n    if (isFinised && isListValid) {\n      state.value = CONTEXT_MENU_STATE.ACTIVE;\n      isActive.value = true;\n      scaleBack();\n      if (hapticFeedback !== 'None') {\n        runOnJS(hapticResponse)();\n      }\n    }\n\n    isAnimationStarted.value = false;\n\n    // TODO: Warn user if item list is empty or not given\n  };\n\n  const scaleHold = () => {\n    'worklet';\n    itemScale.value = withTiming(\n      HOLD_ITEM_SCALE_DOWN_VALUE,\n      { duration: HOLD_ITEM_SCALE_DOWN_DURATION },\n      onCompletion\n    );\n  };\n\n  const scaleTap = () => {\n    'worklet';\n    isAnimationStarted.value = true;\n\n    itemScale.value = withSequence(\n      withTiming(HOLD_ITEM_SCALE_DOWN_VALUE, {\n        duration: HOLD_ITEM_SCALE_DOWN_DURATION,\n      }),\n      withTiming(\n        1,\n        {\n          duration: HOLD_ITEM_TRANSFORM_DURATION / 2,\n        },\n        onCompletion\n      )\n    );\n  };\n\n  /**\n   * When use tap activation (\"tap\") and trying to tap multiple times,\n   * scale animation is called again despite it is started. This causes a bug.\n   * To prevent this, it is better to check is animation already started.\n   */\n  const canCallActivateFunctions = () => {\n    'worklet';\n    const willActivateWithTap =\n      activateOn === 'double-tap' || activateOn === 'tap';\n\n    return (\n      (willActivateWithTap && !isAnimationStarted.value) || !willActivateWithTap\n    );\n  };\n  //#endregion\n\n  //#region gesture events\n  const gestureEvent = useAnimatedGestureHandler<\n    LongPressGestureHandlerGestureEvent | TapGestureHandlerGestureEvent,\n    Context\n  >({\n    onActive: (_, context) => {\n      if (canCallActivateFunctions()) {\n        if (!context.didMeasureLayout) {\n          activateAnimation(context);\n          transformValue.value = calculateTransformValue();\n          setMenuProps();\n          context.didMeasureLayout = true;\n        }\n\n        if (!isActive.value) {\n          if (isHold) {\n            scaleHold();\n          } else {\n            scaleTap();\n          }\n        }\n      }\n    },\n    onFinish: (_, context) => {\n      context.didMeasureLayout = false;\n      if (isHold) {\n        scaleBack();\n      }\n    },\n  });\n\n  const overlayGestureEvent = useAnimatedGestureHandler<\n    TapGestureHandlerGestureEvent,\n    Context\n  >({\n    onActive: _ => {\n      if (closeOnTap) state.value = CONTEXT_MENU_STATE.END;\n    },\n  });\n  //#endregion\n\n  //#region animated styles & props\n  const animatedContainerStyle = useAnimatedStyle(() => {\n    const animateOpacity = () =>\n      withDelay(HOLD_ITEM_TRANSFORM_DURATION, withTiming(1, { duration: 0 }));\n\n    return {\n      opacity: isActive.value ? 0 : animateOpacity(),\n      transform: [\n        {\n          scale: isActive.value\n            ? withTiming(1, { duration: HOLD_ITEM_TRANSFORM_DURATION })\n            : itemScale.value,\n        },\n      ],\n    };\n  });\n  const containerStyle = React.useMemo(\n    () => [containerStyles, animatedContainerStyle],\n    [containerStyles, animatedContainerStyle]\n  );\n\n  const animatedPortalStyle = useAnimatedStyle(() => {\n    const animateOpacity = () =>\n      withDelay(HOLD_ITEM_TRANSFORM_DURATION, withTiming(0, { duration: 0 }));\n\n    let tY = calculateTransformValue();\n    const transformAnimation = () =>\n      disableMove\n        ? 0\n        : isActive.value\n        ? withSpring(tY, SPRING_CONFIGURATION)\n        : withTiming(-0.1, { duration: HOLD_ITEM_TRANSFORM_DURATION });\n\n    return {\n      zIndex: 10,\n      position: 'absolute',\n      top: itemRectY.value,\n      left: itemRectX.value,\n      width: itemRectWidth.value,\n      height: itemRectHeight.value,\n      opacity: isActive.value ? 1 : animateOpacity(),\n      transform: [\n        {\n          translateY: transformAnimation(),\n        },\n        {\n          scale: isActive.value\n            ? withTiming(1, { duration: HOLD_ITEM_TRANSFORM_DURATION })\n            : itemScale.value,\n        },\n      ],\n    };\n  });\n  const portalContainerStyle = useMemo(\n    () => [styles.holdItem, animatedPortalStyle],\n    [animatedPortalStyle]\n  );\n\n  const animatedPortalProps = useAnimatedProps<ViewProps>(() => ({\n    pointerEvents: isActive.value ? 'auto' : 'none',\n  }));\n  //#endregion\n\n  //#region animated effects\n  useAnimatedReaction(\n    () => state.value,\n    _state => {\n      if (_state === CONTEXT_MENU_STATE.END) {\n        isActive.value = false;\n      }\n    }\n  );\n  //#endregion\n\n  //#region components\n  const GestureHandler = useMemo(() => {\n    switch (activateOn) {\n      case `double-tap`:\n        return ({ children: handlerChildren }: GestureHandlerProps) => (\n          <TapGestureHandler\n            numberOfTaps={2}\n            onHandlerStateChange={gestureEvent}\n          >\n            {handlerChildren}\n          </TapGestureHandler>\n        );\n      case `tap`:\n        return ({ children: handlerChildren }: GestureHandlerProps) => (\n          <TapGestureHandler\n            numberOfTaps={1}\n            onHandlerStateChange={gestureEvent}\n          >\n            {handlerChildren}\n          </TapGestureHandler>\n        );\n      // default is hold\n      default:\n        return ({ children: handlerChildren }: GestureHandlerProps) => (\n          <LongPressGestureHandler\n            minDurationMs={longPressMinDurationMs}\n            onHandlerStateChange={gestureEvent}\n          >\n            {handlerChildren}\n          </LongPressGestureHandler>\n        );\n    }\n  }, [activateOn, gestureEvent]);\n\n  const PortalOverlay = useMemo(() => {\n    return () => (\n      <TapGestureHandler\n        numberOfTaps={1}\n        onHandlerStateChange={overlayGestureEvent}\n      >\n        <Animated.View style={styles.portalOverlay} />\n      </TapGestureHandler>\n    );\n  }, [overlayGestureEvent]);\n  //#endregion\n\n  //#region render\n  return (\n    <>\n      <GestureHandler>\n        <Animated.View ref={containerRef} style={containerStyle}>\n          {children}\n        </Animated.View>\n      </GestureHandler>\n\n      <Portal key={key} name={key}>\n        <Animated.View\n          key={key}\n          style={portalContainerStyle}\n          animatedProps={animatedPortalProps}\n        >\n          <PortalOverlay />\n          {children}\n        </Animated.View>\n      </Portal>\n    </>\n  );\n  //#endregion\n};\n\nconst HoldItem = memo(HoldItemComponent);\n\nexport default HoldItem;\n"],"mappings":"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","ignoreList":[]}
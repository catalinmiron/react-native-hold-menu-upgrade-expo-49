{"version":3,"names":["React","StyleSheet","Animated","runOnJS","useAnimatedProps","useAnimatedReaction","useAnimatedStyle","useDerivedValue","useSharedValue","withSpring","withTiming","calculateMenuHeight","menuAnimationAnchor","BlurView","MenuItems","SPRING_CONFIGURATION_MENU","HOLD_ITEM_TRANSFORM_DURATION","IS_IOS","CONTEXT_MENU_STATE","styles","useInternal","deepEqual","leftOrRight","AnimatedView","createAnimatedComponent","MenuListComponent","state","theme","menuProps","itemList","setItemList","useState","menuHeight","itemsWithSeparator","value","items","filter","item","withSeparator","length","prevList","messageStyles","translate","anchorPosition","itemWidth","_leftPosition","menuScaleAnimation","ACTIVE","duration","opacityAnimation","left","height","opacity","transform","translateX","beginningTransformations","translateY","scale","endingTransformations","animatedInnerContainerStyle","backgroundColor","animatedProps","tint","setter","_items","createElement","intensity","style","menuContainer","View","absoluteFillObject","menuInnerContainer","MenuList","memo"],"sources":["MenuList.tsx"],"sourcesContent":["import React from 'react';\nimport { StyleSheet } from 'react-native';\n\nimport Animated, {\n  runOnJS,\n  useAnimatedProps,\n  useAnimatedReaction,\n  useAnimatedStyle,\n  useDerivedValue,\n  useSharedValue,\n  withSpring,\n  withTiming,\n} from 'react-native-reanimated';\n\nimport {\n  calculateMenuHeight,\n  menuAnimationAnchor,\n} from '../../utils/calculations';\nimport { BlurView } from 'expo-blur';\n\nimport MenuItems from './MenuItems';\n\nimport {\n  SPRING_CONFIGURATION_MENU,\n  HOLD_ITEM_TRANSFORM_DURATION,\n  IS_IOS,\n  CONTEXT_MENU_STATE,\n} from '../../constants';\n\nimport styles from './styles';\nimport { MenuItemProps } from './types';\nimport { useInternal } from '../../hooks';\nimport { deepEqual } from '../../utils/validations';\nimport { leftOrRight } from './calculations';\n\nconst AnimatedView = Animated.createAnimatedComponent(BlurView);\n\nconst MenuListComponent = () => {\n  const { state, theme, menuProps } = useInternal();\n\n  const [itemList, setItemList] = React.useState<MenuItemProps[]>([]);\n\n  const menuHeight = useDerivedValue(() => {\n    const itemsWithSeparator = menuProps.value.items.filter(\n      item => item.withSeparator\n    );\n    return calculateMenuHeight(\n      menuProps.value.items.length,\n      itemsWithSeparator.length\n    );\n  }, [menuProps]);\n  const prevList = useSharedValue<MenuItemProps[]>([]);\n\n  const messageStyles = useAnimatedStyle(() => {\n    const itemsWithSeparator = menuProps.value.items.filter(\n      item => item.withSeparator\n    );\n\n    const translate = menuAnimationAnchor(\n      menuProps.value.anchorPosition,\n      menuProps.value.itemWidth,\n      menuProps.value.items.length,\n      itemsWithSeparator.length\n    );\n\n    const _leftPosition = leftOrRight(menuProps);\n\n    const menuScaleAnimation = () =>\n      state.value === CONTEXT_MENU_STATE.ACTIVE\n        ? withSpring(1, SPRING_CONFIGURATION_MENU)\n        : withTiming(0, {\n            duration: HOLD_ITEM_TRANSFORM_DURATION,\n          });\n\n    const opacityAnimation = () =>\n      withTiming(state.value === CONTEXT_MENU_STATE.ACTIVE ? 1 : 0, {\n        duration: HOLD_ITEM_TRANSFORM_DURATION,\n      });\n\n    return {\n      left: _leftPosition,\n      height: menuHeight.value,\n      opacity: opacityAnimation(),\n      transform: [\n        { translateX: translate.beginningTransformations.translateX },\n        { translateY: translate.beginningTransformations.translateY },\n        {\n          scale: menuScaleAnimation(),\n        },\n        { translateX: translate.endingTransformations.translateX },\n        { translateY: translate.endingTransformations.translateY },\n      ],\n    };\n  });\n\n  const animatedInnerContainerStyle = useAnimatedStyle(() => {\n    return {\n      backgroundColor:\n        theme.value === 'light'\n          ? IS_IOS\n            ? 'rgba(255, 255, 255, .75)'\n            : 'rgba(255, 255, 255, .95)'\n          : IS_IOS\n          ? 'rgba(0,0,0,0.5)'\n          : 'rgba(39, 39, 39, .8)',\n    };\n  }, [theme]);\n\n  const animatedProps = useAnimatedProps(() => {\n    return { tint: theme.value };\n  }, [theme]);\n\n  const setter = (items: MenuItemProps[]) => {\n    setItemList(items);\n    prevList.value = items;\n  };\n\n  useAnimatedReaction(\n    () => menuProps.value.items,\n    _items => {\n      if (!deepEqual(_items, prevList.value)) {\n        runOnJS(setter)(_items);\n      }\n    },\n    [menuProps]\n  );\n\n  return (\n    <AnimatedView\n      intensity={100}\n      animatedProps={animatedProps}\n      style={[styles.menuContainer, messageStyles]}\n    >\n      <Animated.View\n        style={[\n          StyleSheet.absoluteFillObject,\n          styles.menuInnerContainer,\n          animatedInnerContainerStyle,\n        ]}\n      >\n        <MenuItems items={itemList} />\n      </Animated.View>\n    </AnimatedView>\n  );\n};\n\nconst MenuList = React.memo(MenuListComponent);\n\nexport default MenuList;\n"],"mappings":"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","ignoreList":[]}
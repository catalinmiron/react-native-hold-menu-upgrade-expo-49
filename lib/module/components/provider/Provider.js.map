{"version":3,"names":["React","memo","useEffect","useMemo","PortalProvider","Animated","useSharedValue","useAnimatedReaction","runOnJS","GestureHandlerRootView","Backdrop","InternalContext","CONTEXT_MENU_STATE","Menu","AnimatedIcon","ProviderComponent","children","theme","selectedTheme","iconComponent","safeAreaInsets","onOpen","onClose","createAnimatedComponent","state","UNDETERMINED","menuProps","itemHeight","itemWidth","itemX","itemY","items","anchorPosition","menuHeight","transformValue","actionParams","value","ACTIVE","END","internalContextVariables","top","bottom","left","right","createElement","style","flex","Provider"],"sources":["Provider.tsx"],"sourcesContent":["import React, { memo, useEffect, useMemo } from 'react';\nimport { PortalProvider } from '@gorhom/portal';\nimport Animated, { useSharedValue, useAnimatedReaction, runOnJS } from 'react-native-reanimated';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\n\n// Components\nimport { Backdrop } from '../backdrop';\n\n// Utils\nimport { InternalContext } from '../../context/internal';\nimport { HoldMenuProviderProps } from './types';\nimport { StateProps, Action } from './reducer';\nimport { CONTEXT_MENU_STATE } from '../../constants';\nimport { MenuInternalProps } from '../menu/types';\nimport Menu from '../menu';\n\nexport interface Store {\n  state: StateProps;\n  dispatch?: React.Dispatch<Action>;\n}\n\nexport let AnimatedIcon: any;\n\nconst ProviderComponent = ({\n  children,\n  theme: selectedTheme,\n  iconComponent,\n  safeAreaInsets,\n  onOpen,\n  onClose,\n}: HoldMenuProviderProps) => {\n  if (iconComponent)\n    AnimatedIcon = Animated.createAnimatedComponent(iconComponent);\n\n  const state = useSharedValue<CONTEXT_MENU_STATE>(\n    CONTEXT_MENU_STATE.UNDETERMINED\n  );\n  const theme = useSharedValue<'light' | 'dark'>(selectedTheme || 'light');\n  const menuProps = useSharedValue<MenuInternalProps>({\n    itemHeight: 0,\n    itemWidth: 0,\n    itemX: 0,\n    itemY: 0,\n    items: [],\n    anchorPosition: 'top-center',\n    menuHeight: 0,\n    transformValue: 0,\n    actionParams: {},\n  });\n\n  useEffect(() => {\n    theme.value = selectedTheme || 'light';\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedTheme]);\n\n  useAnimatedReaction(\n    () => state.value,\n    state => {\n      switch (state) {\n        case CONTEXT_MENU_STATE.ACTIVE: {\n          if (onOpen)\n            runOnJS(onOpen)();\n          break\n        }\n        case CONTEXT_MENU_STATE.END: {\n          if (onClose)\n            runOnJS(onClose)();\n          break\n        }\n      }\n    },\n    [state]\n  );\n\n  const internalContextVariables = useMemo(\n    () => ({\n      state,\n      theme,\n      menuProps,\n      safeAreaInsets: safeAreaInsets || {\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n      },\n    }),\n    [state, theme, menuProps, safeAreaInsets]\n  );\n\n  return (\n    <GestureHandlerRootView style={{ flex: 1 }}>\n      <InternalContext.Provider value={internalContextVariables}>\n        <PortalProvider>\n          {children}\n          <Backdrop />\n          <Menu />\n        </PortalProvider>\n      </InternalContext.Provider>\n    </GestureHandlerRootView>\n  );\n};\n\nconst Provider = memo(ProviderComponent);\n\nexport default Provider;\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,IAAI,EAAEC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AACvD,SAASC,cAAc,QAAQ,gBAAgB;AAC/C,OAAOC,QAAQ,IAAIC,cAAc,EAAEC,mBAAmB,EAAEC,OAAO,QAAQ,yBAAyB;AAChG,SAASC,sBAAsB,QAAQ,8BAA8B;;AAErE;AACA,SAASC,QAAQ,QAAQ,aAAa;;AAEtC;AACA,SAASC,eAAe,QAAQ,wBAAwB;AAGxD,SAASC,kBAAkB,QAAQ,iBAAiB;AAEpD,OAAOC,IAAI,MAAM,SAAS;AAO1B,OAAO,IAAIC,YAAiB;AAE5B,MAAMC,iBAAiB,GAAGA,CAAC;EACzBC,QAAQ;EACRC,KAAK,EAAEC,aAAa;EACpBC,aAAa;EACbC,cAAc;EACdC,MAAM;EACNC;AACqB,CAAC,KAAK;EAC3B,IAAIH,aAAa,EACfL,YAAY,GAAGT,QAAQ,CAACkB,uBAAuB,CAACJ,aAAa,CAAC;EAEhE,MAAMK,KAAK,GAAGlB,cAAc,CAC1BM,kBAAkB,CAACa,YACrB,CAAC;EACD,MAAMR,KAAK,GAAGX,cAAc,CAAmBY,aAAa,IAAI,OAAO,CAAC;EACxE,MAAMQ,SAAS,GAAGpB,cAAc,CAAoB;IAClDqB,UAAU,EAAE,CAAC;IACbC,SAAS,EAAE,CAAC;IACZC,KAAK,EAAE,CAAC;IACRC,KAAK,EAAE,CAAC;IACRC,KAAK,EAAE,EAAE;IACTC,cAAc,EAAE,YAAY;IAC5BC,UAAU,EAAE,CAAC;IACbC,cAAc,EAAE,CAAC;IACjBC,YAAY,EAAE,CAAC;EACjB,CAAC,CAAC;EAEFjC,SAAS,CAAC,MAAM;IACde,KAAK,CAACmB,KAAK,GAAGlB,aAAa,IAAI,OAAO;IACtC;EACF,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;EAEnBX,mBAAmB,CACjB,MAAMiB,KAAK,CAACY,KAAK,EACjBZ,KAAK,IAAI;IACP,QAAQA,KAAK;MACX,KAAKZ,kBAAkB,CAACyB,MAAM;QAAE;UAC9B,IAAIhB,MAAM,EACRb,OAAO,CAACa,MAAM,CAAC,CAAC,CAAC;UACnB;QACF;MACA,KAAKT,kBAAkB,CAAC0B,GAAG;QAAE;UAC3B,IAAIhB,OAAO,EACTd,OAAO,CAACc,OAAO,CAAC,CAAC,CAAC;UACpB;QACF;IACF;EACF,CAAC,EACD,CAACE,KAAK,CACR,CAAC;EAED,MAAMe,wBAAwB,GAAGpC,OAAO,CACtC,OAAO;IACLqB,KAAK;IACLP,KAAK;IACLS,SAAS;IACTN,cAAc,EAAEA,cAAc,IAAI;MAChCoB,GAAG,EAAE,CAAC;MACNC,MAAM,EAAE,CAAC;MACTC,IAAI,EAAE,CAAC;MACPC,KAAK,EAAE;IACT;EACF,CAAC,CAAC,EACF,CAACnB,KAAK,EAAEP,KAAK,EAAES,SAAS,EAAEN,cAAc,CAC1C,CAAC;EAED,oBACEpB,KAAA,CAAA4C,aAAA,CAACnC,sBAAsB;IAACoC,KAAK,EAAE;MAAEC,IAAI,EAAE;IAAE;EAAE,gBACzC9C,KAAA,CAAA4C,aAAA,CAACjC,eAAe,CAACoC,QAAQ;IAACX,KAAK,EAAEG;EAAyB,gBACxDvC,KAAA,CAAA4C,aAAA,CAACxC,cAAc,QACZY,QAAQ,eACThB,KAAA,CAAA4C,aAAA,CAAClC,QAAQ,MAAE,CAAC,eACZV,KAAA,CAAA4C,aAAA,CAAC/B,IAAI,MAAE,CACO,CACQ,CACJ,CAAC;AAE7B,CAAC;AAED,MAAMkC,QAAQ,gBAAG9C,IAAI,CAACc,iBAAiB,CAAC;AAExC,eAAegC,QAAQ","ignoreList":[]}
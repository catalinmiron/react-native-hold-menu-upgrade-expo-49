{"version":3,"names":["React","memo","StyleSheet","TapGestureHandler","Animated","useAnimatedGestureHandler","useAnimatedProps","useAnimatedStyle","withDelay","withTiming","BlurView","CONTEXT_MENU_STATE","HOLD_ITEM_TRANSFORM_DURATION","WINDOW_HEIGHT","useInternal","BACKDROP_DARK_BACKGROUND_COLOR","BACKDROP_LIGHT_BACKGROUND_COLOR","styles","AnimatedBlurView","createAnimatedComponent","BackdropComponent","state","theme","tapGestureEvent","onStart","event","context","startPosition","x","y","onCancel","value","END","onEnd","distance","Math","hypot","shouldClose","isStateActive","ACTIVE","animatedContainerStyle","topValueAnimation","duration","top","animatedContainerProps","intensity","animatedInnerContainerStyle","backgroundColor","createElement","onHandlerStateChange","tint","animatedProps","style","container","View","absoluteFillObject","Backdrop"],"sources":["Backdrop.tsx"],"sourcesContent":["import React, { memo } from 'react';\nimport { StyleSheet } from 'react-native';\nimport {\n  TapGestureHandler,\n  TapGestureHandlerGestureEvent,\n} from 'react-native-gesture-handler';\nimport Animated, {\n  useAnimatedGestureHandler,\n  useAnimatedProps,\n  useAnimatedStyle,\n  withDelay,\n  withTiming,\n} from 'react-native-reanimated';\n\n// Components\nimport { BlurView } from 'expo-blur';\n\n// Utils\nimport {\n  CONTEXT_MENU_STATE,\n  HOLD_ITEM_TRANSFORM_DURATION,\n  WINDOW_HEIGHT,\n} from '../../constants';\nimport { useInternal } from '../../hooks';\nimport {\n  BACKDROP_DARK_BACKGROUND_COLOR,\n  BACKDROP_LIGHT_BACKGROUND_COLOR,\n} from './constants';\nimport { styles } from './styles';\n\nconst AnimatedBlurView = Animated.createAnimatedComponent(BlurView);\n\ntype Context = {\n  startPosition: {\n    x: number;\n    y: number;\n  };\n};\n\nconst BackdropComponent = () => {\n  const { state, theme } = useInternal();\n\n  const tapGestureEvent = useAnimatedGestureHandler<\n    TapGestureHandlerGestureEvent,\n    Context\n  >(\n    {\n      onStart: (event, context) => {\n        context.startPosition = { x: event.x, y: event.y };\n      },\n      onCancel: () => {\n        state.value = CONTEXT_MENU_STATE.END;\n      },\n      onEnd: (event, context) => {\n        const distance = Math.hypot(\n          event.x - context.startPosition.x,\n          event.y - context.startPosition.y\n        );\n        const shouldClose = distance < 10;\n        const isStateActive = state.value === CONTEXT_MENU_STATE.ACTIVE;\n\n        if (shouldClose && isStateActive) {\n          state.value = CONTEXT_MENU_STATE.END;\n        }\n      },\n    },\n    [state]\n  );\n\n  const animatedContainerStyle = useAnimatedStyle(() => {\n    const topValueAnimation = () =>\n      state.value === CONTEXT_MENU_STATE.ACTIVE\n        ? 0\n        : withDelay(\n            HOLD_ITEM_TRANSFORM_DURATION,\n            withTiming(WINDOW_HEIGHT, {\n              duration: 0,\n            })\n          );\n\n    // const opacityValueAnimation = () =>\n    //   withTiming(state.value === CONTEXT_MENU_STATE.ACTIVE ? 1 : 0, {\n    //     duration: HOLD_ITEM_TRANSFORM_DURATION,\n    //   });\n\n    return {\n      top: topValueAnimation(),\n      // opacity: opacityValueAnimation(),\n    };\n  });\n\n  const animatedContainerProps = useAnimatedProps(() => {\n    return {\n      intensity: withTiming(\n        state.value === CONTEXT_MENU_STATE.ACTIVE ? 100 : 0,\n        {\n          duration: HOLD_ITEM_TRANSFORM_DURATION,\n        }\n      ),\n    };\n  });\n\n  const animatedInnerContainerStyle = useAnimatedStyle(() => {\n    const backgroundColor =\n      theme.value === 'light'\n        ? BACKDROP_LIGHT_BACKGROUND_COLOR\n        : BACKDROP_DARK_BACKGROUND_COLOR;\n\n    return { backgroundColor };\n  }, [theme]);\n\n  return (\n    <TapGestureHandler onHandlerStateChange={tapGestureEvent}>\n      <AnimatedBlurView\n        // @ts-ignore\n        tint=\"default\"\n        animatedProps={animatedContainerProps}\n        style={[styles.container, animatedContainerStyle]}\n      >\n        <Animated.View\n          style={[\n            { ...StyleSheet.absoluteFillObject },\n            animatedInnerContainerStyle,\n          ]}\n        />\n      </AnimatedBlurView>\n    </TapGestureHandler>\n  );\n};\n\nconst Backdrop = memo(BackdropComponent);\n\nexport default Backdrop;\n"],"mappings":"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","ignoreList":[]}
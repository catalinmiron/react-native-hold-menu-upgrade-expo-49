{"version":3,"names":["React","memo","useMemo","TapGestureHandler","LongPressGestureHandler","Animated","measure","runOnJS","useAnimatedGestureHandler","useAnimatedProps","useAnimatedRef","useAnimatedStyle","useSharedValue","withDelay","withTiming","withSequence","withSpring","useAnimatedReaction","Portal","nanoid","Haptics","getTransformOrigin","calculateMenuHeight","HOLD_ITEM_TRANSFORM_DURATION","HOLD_ITEM_SCALE_DOWN_DURATION","HOLD_ITEM_SCALE_DOWN_VALUE","SPRING_CONFIGURATION","WINDOW_HEIGHT","WINDOW_WIDTH","CONTEXT_MENU_STATE","useDeviceOrientation","styles","styleGuide","useInternal","HoldItemComponent","items","bottom","containerStyles","disableMove","menuAnchorPosition","activateOn","hapticFeedback","actionParams","closeOnTap","longPressMinDurationMs","children","state","menuProps","safeAreaInsets","deviceOrientation","isActive","isAnimationStarted","itemRectY","itemRectX","itemRectWidth","itemRectHeight","itemScale","transformValue","transformOrigin","key","menuHeight","itemsWithSeparator","filter","item","withSeparator","length","isHold","containerRef","hapticResponse","style","selectionAsync","impactAsync","ImpactFeedbackStyle","notificationAsync","NotificationFeedbackType","activateAnimation","ctx","didMeasureLayout","measured","value","pageY","pageX","height","width","position","calculateTransformValue","isAnchorPointTop","includes","tY","topTransform","spacing","bottomTransform","top","setMenuProps","itemHeight","itemWidth","itemY","itemX","anchorPosition","scaleBack","duration","onCompletion","isFinised","isListValid","ACTIVE","scaleHold","scaleTap","canCallActivateFunctions","willActivateWithTap","gestureEvent","onActive","_","context","onFinish","overlayGestureEvent","END","animatedContainerStyle","animateOpacity","opacity","transform","scale","containerStyle","animatedPortalStyle","transformAnimation","zIndex","left","translateY","portalContainerStyle","holdItem","animatedPortalProps","pointerEvents","_state","GestureHandler","handlerChildren","createElement","numberOfTaps","onHandlerStateChange","minDurationMs","PortalOverlay","View","portalOverlay","Fragment","ref","name","animatedProps","HoldItem"],"sources":["HoldItem.tsx"],"sourcesContent":["import React, { memo, useMemo } from 'react';\nimport { ViewProps } from 'react-native';\n\n//#region reanimated & gesture handler\nimport {\n  TapGestureHandler,\n  LongPressGestureHandler,\n  TapGestureHandlerGestureEvent,\n  LongPressGestureHandlerGestureEvent,\n} from 'react-native-gesture-handler';\nimport Animated, {\n  measure,\n  runOnJS,\n  useAnimatedGestureHandler,\n  useAnimatedProps,\n  useAnimatedRef,\n  useAnimatedStyle,\n  useSharedValue,\n  withDelay,\n  withTiming,\n  withSequence,\n  withSpring,\n  useAnimatedReaction,\n} from 'react-native-reanimated';\n//#endregion\n\n//#region dependencies\nimport { Portal } from '@gorhom/portal';\nimport { nanoid } from 'nanoid/non-secure';\nimport * as Haptics from 'expo-haptics';\n//#endregion\n\n//#region utils & types\nimport {\n  TransformOriginAnchorPosition,\n  getTransformOrigin,\n  calculateMenuHeight,\n} from '../../utils/calculations';\nimport {\n  HOLD_ITEM_TRANSFORM_DURATION,\n  HOLD_ITEM_SCALE_DOWN_DURATION,\n  HOLD_ITEM_SCALE_DOWN_VALUE,\n  SPRING_CONFIGURATION,\n  WINDOW_HEIGHT,\n  WINDOW_WIDTH,\n  CONTEXT_MENU_STATE,\n} from '../../constants';\nimport { useDeviceOrientation } from '../../hooks';\nimport styles from './styles';\n\nimport type { HoldItemProps, GestureHandlerProps } from './types';\nimport styleGuide from '../../styleGuide';\nimport { useInternal } from '../../hooks';\n//#endregion\n\ntype Context = { didMeasureLayout: boolean };\n\nconst HoldItemComponent = ({\n  items,\n  bottom,\n  containerStyles,\n  disableMove,\n  menuAnchorPosition,\n  activateOn,\n  hapticFeedback,\n  actionParams,\n  closeOnTap,\n  longPressMinDurationMs = 150,\n  children,\n}: HoldItemProps) => {\n  //#region hooks\n  const { state, menuProps, safeAreaInsets } = useInternal();\n  const deviceOrientation = useDeviceOrientation();\n  //#endregion\n\n  //#region variables\n  const isActive = useSharedValue(false);\n  const isAnimationStarted = useSharedValue(false);\n\n  const itemRectY = useSharedValue<number>(0);\n  const itemRectX = useSharedValue<number>(0);\n  const itemRectWidth = useSharedValue<number>(0);\n  const itemRectHeight = useSharedValue<number>(0);\n  const itemScale = useSharedValue<number>(1);\n  const transformValue = useSharedValue<number>(0);\n\n  const transformOrigin = useSharedValue<TransformOriginAnchorPosition>(\n    menuAnchorPosition || 'top-right'\n  );\n\n  const key = useMemo(() => `hold-item-${nanoid()}`, []);\n  const menuHeight = useMemo(() => {\n    const itemsWithSeparator = items.filter(item => item.withSeparator);\n    return calculateMenuHeight(items.length, itemsWithSeparator.length);\n  }, [items]);\n\n  const isHold = !activateOn || activateOn === 'hold';\n  //#endregion\n\n  //#region refs\n  const containerRef = useAnimatedRef<Animated.View>();\n  //#endregion\n\n  //#region functions\n  const hapticResponse = () => {\n    const style = !hapticFeedback ? 'Medium' : hapticFeedback;\n    switch (style) {\n      case `Selection`:\n        Haptics.selectionAsync();\n        break;\n      case `Light`:\n      case `Medium`:\n      case `Heavy`:\n        Haptics.impactAsync(Haptics.ImpactFeedbackStyle[style]);\n        break;\n      case `Success`:\n      case `Warning`:\n      case `Error`:\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType[style]);\n        break;\n      default:\n    }\n  };\n  //#endregion\n\n  //#region worklet functions\n  const activateAnimation = (ctx: any) => {\n    'worklet';\n    if (!ctx.didMeasureLayout) {\n      const measured = measure(containerRef);\n\n      itemRectY.value = measured.pageY;\n      itemRectX.value = measured.pageX;\n      itemRectHeight.value = measured.height;\n      itemRectWidth.value = measured.width;\n\n      if (!menuAnchorPosition) {\n        const position = getTransformOrigin(\n          measured.pageX,\n          itemRectWidth.value,\n          deviceOrientation === 'portrait' ? WINDOW_WIDTH : WINDOW_HEIGHT,\n          bottom\n        );\n        transformOrigin.value = position;\n      }\n    }\n  };\n\n  const calculateTransformValue = () => {\n    'worklet';\n\n    const height =\n      deviceOrientation === 'portrait' ? WINDOW_HEIGHT : WINDOW_WIDTH;\n\n    const isAnchorPointTop = transformOrigin.value.includes('top');\n\n    let tY = 0;\n    if (!disableMove) {\n      if (isAnchorPointTop) {\n        const topTransform =\n          itemRectY.value +\n          itemRectHeight.value +\n          menuHeight +\n          styleGuide.spacing +\n          (safeAreaInsets?.bottom || 0);\n\n        tY = topTransform > height ? height - topTransform : 0;\n      } else {\n        const bottomTransform =\n          itemRectY.value - menuHeight - (safeAreaInsets?.top || 0);\n        tY =\n          bottomTransform < 0 ? -bottomTransform + styleGuide.spacing * 2 : 0;\n      }\n    }\n    return tY;\n  };\n\n  const setMenuProps = () => {\n    'worklet';\n\n    menuProps.value = {\n      itemHeight: itemRectHeight.value,\n      itemWidth: itemRectWidth.value,\n      itemY: itemRectY.value,\n      itemX: itemRectX.value,\n      anchorPosition: transformOrigin.value,\n      menuHeight: menuHeight,\n      items,\n      transformValue: transformValue.value,\n      actionParams: actionParams || {},\n    };\n  };\n\n  const scaleBack = () => {\n    'worklet';\n    itemScale.value = withTiming(1, {\n      duration: HOLD_ITEM_TRANSFORM_DURATION / 2,\n    });\n  };\n\n  const onCompletion = (isFinised?: boolean) => {\n    'worklet';\n    const isListValid = items && items.length > 0;\n    if (isFinised && isListValid) {\n      state.value = CONTEXT_MENU_STATE.ACTIVE;\n      isActive.value = true;\n      scaleBack();\n      if (hapticFeedback !== 'None') {\n        runOnJS(hapticResponse)();\n      }\n    }\n\n    isAnimationStarted.value = false;\n\n    // TODO: Warn user if item list is empty or not given\n  };\n\n  const scaleHold = () => {\n    'worklet';\n    itemScale.value = withTiming(\n      HOLD_ITEM_SCALE_DOWN_VALUE,\n      { duration: HOLD_ITEM_SCALE_DOWN_DURATION },\n      onCompletion\n    );\n  };\n\n  const scaleTap = () => {\n    'worklet';\n    isAnimationStarted.value = true;\n\n    itemScale.value = withSequence(\n      withTiming(HOLD_ITEM_SCALE_DOWN_VALUE, {\n        duration: HOLD_ITEM_SCALE_DOWN_DURATION,\n      }),\n      withTiming(\n        1,\n        {\n          duration: HOLD_ITEM_TRANSFORM_DURATION / 2,\n        },\n        onCompletion\n      )\n    );\n  };\n\n  /**\n   * When use tap activation (\"tap\") and trying to tap multiple times,\n   * scale animation is called again despite it is started. This causes a bug.\n   * To prevent this, it is better to check is animation already started.\n   */\n  const canCallActivateFunctions = () => {\n    'worklet';\n    const willActivateWithTap =\n      activateOn === 'double-tap' || activateOn === 'tap';\n\n    return (\n      (willActivateWithTap && !isAnimationStarted.value) || !willActivateWithTap\n    );\n  };\n  //#endregion\n\n  //#region gesture events\n  const gestureEvent = useAnimatedGestureHandler<\n    LongPressGestureHandlerGestureEvent | TapGestureHandlerGestureEvent,\n    Context\n  >({\n    onActive: (_, context) => {\n      if (canCallActivateFunctions()) {\n        if (!context.didMeasureLayout) {\n          activateAnimation(context);\n          transformValue.value = calculateTransformValue();\n          setMenuProps();\n          context.didMeasureLayout = true;\n        }\n\n        if (!isActive.value) {\n          if (isHold) {\n            scaleHold();\n          } else {\n            scaleTap();\n          }\n        }\n      }\n    },\n    onFinish: (_, context) => {\n      context.didMeasureLayout = false;\n      if (isHold) {\n        scaleBack();\n      }\n    },\n  });\n\n  const overlayGestureEvent = useAnimatedGestureHandler<\n    TapGestureHandlerGestureEvent,\n    Context\n  >({\n    onActive: _ => {\n      if (closeOnTap) state.value = CONTEXT_MENU_STATE.END;\n    },\n  });\n  //#endregion\n\n  //#region animated styles & props\n  const animatedContainerStyle = useAnimatedStyle(() => {\n    const animateOpacity = () =>\n      withDelay(HOLD_ITEM_TRANSFORM_DURATION, withTiming(1, { duration: 0 }));\n\n    return {\n      opacity: isActive.value ? 0 : animateOpacity(),\n      transform: [\n        {\n          scale: isActive.value\n            ? withTiming(1, { duration: HOLD_ITEM_TRANSFORM_DURATION })\n            : itemScale.value,\n        },\n      ],\n    };\n  });\n  const containerStyle = React.useMemo(\n    () => [containerStyles, animatedContainerStyle],\n    [containerStyles, animatedContainerStyle]\n  );\n\n  const animatedPortalStyle = useAnimatedStyle(() => {\n    const animateOpacity = () =>\n      withDelay(HOLD_ITEM_TRANSFORM_DURATION, withTiming(0, { duration: 0 }));\n\n    let tY = calculateTransformValue();\n    const transformAnimation = () =>\n      disableMove\n        ? 0\n        : isActive.value\n        ? withSpring(tY, SPRING_CONFIGURATION)\n        : withTiming(-0.1, { duration: HOLD_ITEM_TRANSFORM_DURATION });\n\n    return {\n      zIndex: 10,\n      position: 'absolute',\n      top: itemRectY.value,\n      left: itemRectX.value,\n      width: itemRectWidth.value,\n      height: itemRectHeight.value,\n      opacity: isActive.value ? 1 : animateOpacity(),\n      transform: [\n        {\n          translateY: transformAnimation(),\n        },\n        {\n          scale: isActive.value\n            ? withTiming(1, { duration: HOLD_ITEM_TRANSFORM_DURATION })\n            : itemScale.value,\n        },\n      ],\n    };\n  });\n  const portalContainerStyle = useMemo(\n    () => [styles.holdItem, animatedPortalStyle],\n    [animatedPortalStyle]\n  );\n\n  const animatedPortalProps = useAnimatedProps<ViewProps>(() => ({\n    pointerEvents: isActive.value ? 'auto' : 'none',\n  }));\n  //#endregion\n\n  //#region animated effects\n  useAnimatedReaction(\n    () => state.value,\n    _state => {\n      if (_state === CONTEXT_MENU_STATE.END) {\n        isActive.value = false;\n      }\n    }\n  );\n  //#endregion\n\n  //#region components\n  const GestureHandler = useMemo(() => {\n    switch (activateOn) {\n      case `double-tap`:\n        return ({ children: handlerChildren }: GestureHandlerProps) => (\n          <TapGestureHandler\n            numberOfTaps={2}\n            onHandlerStateChange={gestureEvent}\n          >\n            {handlerChildren}\n          </TapGestureHandler>\n        );\n      case `tap`:\n        return ({ children: handlerChildren }: GestureHandlerProps) => (\n          <TapGestureHandler\n            numberOfTaps={1}\n            onHandlerStateChange={gestureEvent}\n          >\n            {handlerChildren}\n          </TapGestureHandler>\n        );\n      // default is hold\n      default:\n        return ({ children: handlerChildren }: GestureHandlerProps) => (\n          <LongPressGestureHandler\n            minDurationMs={longPressMinDurationMs}\n            onHandlerStateChange={gestureEvent}\n          >\n            {handlerChildren}\n          </LongPressGestureHandler>\n        );\n    }\n  }, [activateOn, gestureEvent]);\n\n  const PortalOverlay = useMemo(() => {\n    return () => (\n      <TapGestureHandler\n        numberOfTaps={1}\n        onHandlerStateChange={overlayGestureEvent}\n      >\n        <Animated.View style={styles.portalOverlay} />\n      </TapGestureHandler>\n    );\n  }, [overlayGestureEvent]);\n  //#endregion\n\n  //#region render\n  return (\n    <>\n      <GestureHandler>\n        <Animated.View ref={containerRef} style={containerStyle}>\n          {children}\n        </Animated.View>\n      </GestureHandler>\n\n      <Portal key={key} name={key}>\n        <Animated.View\n          key={key}\n          style={portalContainerStyle}\n          animatedProps={animatedPortalProps}\n        >\n          <PortalOverlay />\n          {children}\n        </Animated.View>\n      </Portal>\n    </>\n  );\n  //#endregion\n};\n\nconst HoldItem = memo(HoldItemComponent);\n\nexport default HoldItem;\n"],"mappings":"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","ignoreList":[]}